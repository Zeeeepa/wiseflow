<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wiseflow Data Mining Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/static/css/dashboard.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Wiseflow Dashboard</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="/">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/dashboard">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="/data-mining">Data Mining</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/search">Search</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/plugins">Plugins</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/monitor">Monitor</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <div class="col-md-2 sidebar">
                <div class="sidebar-heading">Data Mining</div>
                <a href="/data-mining" class="sidebar-link active">Active Tasks</a>
                <a href="/data-mining/templates" class="sidebar-link">Templates</a>
                <a href="/data-mining/database" class="sidebar-link">Findings Database</a>
                <a href="/data-mining/interconnections" class="sidebar-link">Interconnections</a>
                
                <div class="sidebar-heading">Data Sources</div>
                <a href="/data-mining/github" class="sidebar-link">GitHub</a>
                <a href="/data-mining/arxiv" class="sidebar-link">ArXiv</a>
                <a href="/data-mining/web" class="sidebar-link">Web Research</a>
                <a href="/data-mining/youtube" class="sidebar-link">YouTube</a>
                
                <div class="sidebar-heading">Tools</div>
                <a href="/data-mining/visualize" class="sidebar-link">Visualize</a>
                <a href="/data-mining/export" class="sidebar-link">Export</a>
                <a href="/data-mining/settings" class="sidebar-link">Settings</a>
            </div>
            
            <div class="col-md-10 p-4">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2>Active Data Mining</h2>
                    <button class="btn btn-primary" id="new-data-mining-btn" data-bs-toggle="modal" data-bs-target="#newDataMiningModal">
                        <i class="bi bi-plus-lg"></i> New
                    </button>
                </div>
                
                <div class="card mb-4">
                    <div class="card-body p-0">
                        <div class="table-responsive">
                            <table class="table table-hover mb-0">
                                <thead class="table-light">
                                    <tr>
                                        <th>Task</th>
                                        <th>Source</th>
                                        <th>Runtime</th>
                                        <th>Progress</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="data-mining-tasks">
                                    <!-- Tasks will be loaded dynamically -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <div class="d-flex justify-content-between">
                    <div class="btn-group">
                        <button class="btn btn-outline-secondary" id="refresh-btn">
                            <i class="bi bi-arrow-clockwise"></i> Refresh
                        </button>
                        <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="filterDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-funnel"></i> Filter
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="filterDropdown">
                            <li><a class="dropdown-item" href="#" data-filter="all">All Tasks</a></li>
                            <li><a class="dropdown-item" href="#" data-filter="github">GitHub</a></li>
                            <li><a class="dropdown-item" href="#" data-filter="arxiv">ArXiv</a></li>
                            <li><a class="dropdown-item" href="#" data-filter="web">Web Research</a></li>
                            <li><a class="dropdown-item" href="#" data-filter="youtube">YouTube</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" data-filter="active">Active Only</a></li>
                            <li><a class="dropdown-item" href="#" data-filter="completed">Completed Only</a></li>
                        </ul>
                    </div>
                    
                    <div class="btn-group">
                        <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="sortDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-sort-down"></i> Sort By: Runtime
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="sortDropdown">
                            <li><a class="dropdown-item" href="#" data-sort="runtime-desc">Runtime (Longest First)</a></li>
                            <li><a class="dropdown-item" href="#" data-sort="runtime-asc">Runtime (Shortest First)</a></li>
                            <li><a class="dropdown-item" href="#" data-sort="progress-desc">Progress (Highest First)</a></li>
                            <li><a class="dropdown-item" href="#" data-sort="progress-asc">Progress (Lowest First)</a></li>
                            <li><a class="dropdown-item" href="#" data-sort="name-asc">Name (A-Z)</a></li>
                            <li><a class="dropdown-item" href="#" data-sort="name-desc">Name (Z-A)</a></li>
                            <li><a class="dropdown-item" href="#" data-sort="source-asc">Source (A-Z)</a></li>
                            <li><a class="dropdown-item" href="#" data-sort="date-desc">Date (Newest First)</a></li>
                        </ul>
                    </div>
                    
                    <button class="btn btn-outline-success" id="export-btn">
                        <i class="bi bi-download"></i> Export
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- New Data Mining Modal -->
    <div class="modal fade" id="newDataMiningModal" tabindex="-1" aria-labelledby="newDataMiningModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="newDataMiningModalLabel">Select Data Source</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row text-center">
                        <div class="col-md-3 mb-4">
                            <div class="data-source-card p-3 rounded h-100 d-flex flex-column align-items-center" data-source="github">
                                <i class="bi bi-github data-source-icon mb-3"></i>
                                <h5>GitHub</h5>
                                <p class="text-muted small">Code Mining Source</p>
                            </div>
                        </div>
                        <div class="col-md-3 mb-4">
                            <div class="data-source-card p-3 rounded h-100 d-flex flex-column align-items-center" data-source="web">
                                <i class="bi bi-globe data-source-icon mb-3"></i>
                                <h5>WebSearch</h5>
                                <p class="text-muted small">Web Content Mining</p>
                            </div>
                        </div>
                        <div class="col-md-3 mb-4">
                            <div class="data-source-card p-3 rounded h-100 d-flex flex-column align-items-center" data-source="youtube">
                                <i class="bi bi-youtube data-source-icon mb-3"></i>
                                <h5>YouTube</h5>
                                <p class="text-muted small">Video Mining Content</p>
                            </div>
                        </div>
                        <div class="col-md-3 mb-4">
                            <div class="data-source-card p-3 rounded h-100 d-flex flex-column align-items-center" data-source="arxiv">
                                <i class="bi bi-journal-text data-source-icon mb-3"></i>
                                <h5>ArXiv</h5>
                                <p class="text-muted small">Research Papers Mining</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-outline-info" id="helpBtn">Help</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Task Details Modal -->
    <div class="modal fade" id="taskDetailsModal" tabindex="-1" aria-labelledby="taskDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="taskDetailsModalLabel">Task Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="task-details-content">
                    <!-- Task details will be loaded dynamically -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="viewFindingsBtn">View Findings</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Shared modules -->
    <script src="/static/js/shared/utils.js"></script>
    <script src="/static/js/shared/event_bus.js"></script>
    <script src="/static/js/shared/state_manager.js"></script>
    <script src="/static/js/shared/api_service.js"></script>
    <script src="/static/js/shared/component_loader.js"></script>
    <script src="/static/js/shared/theme_manager.js"></script>
    
    <!-- Application scripts -->
    <script src="/static/js/data_mining_dashboard.js"></script>
    <script src="/static/js/app.js"></script>
</body>
</html>
